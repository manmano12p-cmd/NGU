<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Never Give Up - Arquitectura del Hábito</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        .glass-nav {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }
        .active-tab {
            background-color: #4f46e5;
            color: white;
            transform: scale(1.1);
            box-shadow: 0 10px 15px -3px rgba(79, 70, 229, 0.4);
        }
        input:focus, textarea:focus {
            outline: none;
            ring: 2px;
            ring-color: #4f46e5;
        }
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 pb-24 min-h-screen">

    <!-- Header -->
    <header class="sticky top-0 bg-white/80 backdrop-blur-lg border-b border-slate-100 px-6 py-4 z-50 flex items-center justify-between">
        <div class="flex items-center gap-2">
            <div class="bg-indigo-600 p-1.5 rounded-lg text-white">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>
            </div>
            <h1 class="font-black text-lg tracking-tight uppercase">Never Give Up</h1>
        </div>
        <div class="flex items-center gap-1 bg-indigo-50 px-3 py-1 rounded-full text-indigo-600">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></svg>
            <span id="progress-percent" class="text-xs font-black">0%</span>
        </div>
    </header>

    <main class="px-5 pt-6 max-w-md mx-auto space-y-6">
        
        <!-- Tab: Hoy (Dashboard) -->
        <section id="tab-dashboard" class="tab-content animate-in">
            <!-- Timer -->
            <div class="bg-slate-900 rounded-[2.5rem] p-6 mb-6 text-white text-center shadow-xl">
                <p class="text-[10px] font-bold opacity-50 uppercase tracking-widest mb-1 text-center">Concentración Total</p>
                <h2 id="timer-display" class="text-5xl font-mono font-black mb-4">00:00</h2>
                <div class="flex gap-2 justify-center">
                    <button id="timer-toggle" class="px-6 py-3 rounded-2xl font-black text-xs flex items-center gap-2 bg-indigo-500 hover:bg-indigo-400 transition-colors">
                        INICIAR
                    </button>
                    <button id="timer-reset" class="p-3 bg-white/10 rounded-2xl hover:bg-white/20 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
                    </button>
                </div>
            </div>

            <!-- Garrones -->
            <h2 class="font-black text-xs text-slate-400 uppercase tracking-widest mb-4 ml-2">El Garrón del Día</h2>
            <div class="flex gap-2 mb-6">
                <input type="text" id="garron-input" placeholder="¿Qué tenés que atacar?" class="flex-1 bg-white rounded-2xl px-4 text-sm border-none shadow-sm focus:ring-2 focus:ring-indigo-500">
                <button id="add-garron" class="bg-indigo-600 text-white p-4 rounded-2xl shadow-lg shadow-indigo-100 transition-transform active:scale-90">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
                </button>
            </div>
            <div id="garrones-list" class="space-y-3"></div>
        </section>

        <!-- Tab: Clases -->
        <section id="tab-clases" class="tab-content hidden animate-in">
            <div id="clases-list" class="space-y-4"></div>
        </section>

        <!-- Tab: Bitácora -->
        <section id="tab-reflexion" class="tab-content hidden animate-in">
            <div class="bg-indigo-600 rounded-[2.5rem] p-8 text-white mb-6 relative overflow-hidden shadow-lg">
                <h2 class="text-2xl font-black mb-2">Bitácora Mental</h2>
                <p class="text-xs opacity-80 mb-6 leading-relaxed">Bajá tus pensamientos a tierra. ¿Qué aprendiste hoy sobre tu coherencia?</p>
                <textarea id="reflection-input" placeholder="Escribí tu reflexión del día..." class="w-full bg-white/10 border border-white/20 rounded-2xl p-4 text-sm placeholder:text-white/40 text-white outline-none focus:bg-white/20 mb-4 h-32 resize-none"></textarea>
                <button id="save-reflection" class="w-full bg-white text-indigo-600 py-4 rounded-2xl font-black text-xs shadow-xl active:scale-95 transition-all">
                    GUARDAR REFLEXIÓN
                </button>
            </div>
            <div id="reflections-list" class="space-y-4 mb-10"></div>
        </section>

        <!-- Tab: Meta -->
        <section id="tab-config" class="tab-content hidden animate-in">
            <div class="bg-white p-6 rounded-[2.5rem] border border-slate-100 shadow-sm mb-4">
                <h3 class="font-bold text-slate-800 mb-2 flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-indigo-600"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                    Filosofía del Hábito
                </h3>
                <p class="text-xs text-slate-600 leading-relaxed italic">
                    "La coherencia es hacer lo que dijiste que ibas a hacer, incluso cuando ya no tenés ganas".
                </p>
            </div>
            <button id="reset-btn" class="w-full p-6 rounded-[2.5rem] bg-white border border-rose-100 text-rose-500 font-black text-xs uppercase shadow-sm">
                Borrar todo el progreso
            </button>
        </section>

    </main>

    <!-- Nav Inferior -->
    <footer class="fixed bottom-6 left-1/2 -translate-x-1/2 w-[90%] max-w-sm glass-nav border border-slate-200 h-16 rounded-full shadow-2xl z-50 flex items-center justify-around px-2">
        <button onclick="showTab('dashboard')" class="nav-btn flex flex-col items-center justify-center w-12 h-12 rounded-full transition-all text-slate-300" data-tab="dashboard">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>
        </button>
        <button onclick="showTab('clases')" class="nav-btn flex flex-col items-center justify-center w-12 h-12 rounded-full transition-all text-slate-300" data-tab="clases">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>
        </button>
        <button onclick="showTab('reflexion')" class="nav-btn flex flex-col items-center justify-center w-12 h-12 rounded-full transition-all text-slate-300" data-tab="reflexion">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>
        </button>
        <button onclick="showTab('config')" class="nav-btn flex flex-col items-center justify-center w-12 h-12 rounded-full transition-all text-slate-300" data-tab="config">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg>
        </button>
    </footer>

    <script>
        // --- Datos de Ejercicios ---
        const exercises = [
            { id: 1, title: "Desdramatizar", class: "C1", concept: "Nada es tan grave.", task: "Reíte de una crítica por 1 minuto." },
            { id: 2, title: "Generosidad Mental", class: "C2", concept: "No asumas mala fe.", task: "Atribuí una ofensa al cansancio del otro." },
            { id: 3, title: "Cartas Listas", class: "C3", concept: "Preparación vs Improvisación.", task: "Escribí 3 respuestas para crisis." },
            { id: 4, title: "Zoom Out", class: "C4", concept: "Curiosidad expansiva.", task: "Investigá algo ajeno a tu trabajo." },
            { id: 5, title: "Filtro Anti-Hate", class: "C5", concept: "Protección de la receta.", task: "Descartá una crítica que no sume." },
            { id: 6, title: "Energía Extra", class: "C6", concept: "El 'Para Qué' es motor.", task: "Definí tu propósito de hoy." },
            { id: 7, title: "Higiene Digital", class: "C7", concept: "Higiene de referencias.", task: "Silenciá 5 cuentas tóxicas." },
            { id: 8, title: "Silencio de Raíz", class: "C8", concept: "El secreto da fuerza.", task: "No cuentes tus planes por 72h." },
            { id: 9, title: "Maestría x Volumen", class: "C9", concept: "Cantidad genera calidad.", task: "Hacé 10 borradores rápidos hoy." },
            { id: 10, title: "Coherencia", class: "C10", concept: "Identidad sobre emoción.", task: "Hacé lo que dijiste que harías." }
        ];

        // --- Estado de la App ---
        let state = {
            garrones: JSON.parse(localStorage.getItem('web_garrones')) || [],
            completed: JSON.parse(localStorage.getItem('web_completed')) || [],
            reflections: JSON.parse(localStorage.getItem('web_reflections')) || [],
            timer: 0,
            timerRunning: false
        };

        let timerInterval;

        // --- Navegación ---
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
            document.getElementById(`tab-${tabId}`).classList.remove('hidden');
            
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active-tab');
                if(btn.dataset.tab === tabId) btn.classList.add('active-tab');
            });
        }

        // --- Temporizador ---
        function formatTime(s) {
            const m = Math.floor(s / 60);
            const secs = s % 60;
            return `${m.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        document.getElementById('timer-toggle').addEventListener('click', () => {
            state.timerRunning = !state.timerRunning;
            const btn = document.getElementById('timer-toggle');
            if(state.timerRunning) {
                btn.innerText = 'PAUSAR';
                btn.classList.replace('bg-indigo-500', 'bg-rose-500');
                timerInterval = setInterval(() => {
                    state.timer++;
                    document.getElementById('timer-display').innerText = formatTime(state.timer);
                }, 1000);
            } else {
                btn.innerText = 'ENFOCAR';
                btn.classList.replace('bg-rose-500', 'bg-indigo-500');
                clearInterval(timerInterval);
            }
        });

        document.getElementById('timer-reset').addEventListener('click', () => {
            state.timer = 0;
            document.getElementById('timer-display').innerText = "00:00";
        });

        // --- Garrones ---
        function renderGarrones() {
            const list = document.getElementById('garrones-list');
            list.innerHTML = state.garrones.map(g => `
                <div class="flex items-center justify-between p-4 bg-white rounded-2xl shadow-sm border border-slate-50">
                    <div class="flex items-center gap-3">
                        <button onclick="toggleGarron(${g.id})" class="p-1 rounded-lg ${g.done ? 'bg-green-50 text-green-600' : 'bg-slate-50 text-slate-300'}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                        </button>
                        <span class="text-sm font-medium ${g.done ? 'line-through text-slate-300' : 'text-slate-700'}">${g.text}</span>
                    </div>
                    <button onclick="deleteGarron(${g.id})" class="text-slate-200 hover:text-rose-400"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button>
                </div>
            `).join('');
            localStorage.setItem('web_garrones', JSON.stringify(state.garrones));
        }

        document.getElementById('add-garron').addEventListener('click', () => {
            const input = document.getElementById('garron-input');
            if(!input.value.trim()) return;
            state.garrones.push({ id: Date.now(), text: input.value, done: false });
            input.value = '';
            renderGarrones();
        });

        function toggleGarron(id) {
            state.garrones = state.garrones.map(g => g.id === id ? {...g, done: !g.done} : g);
            renderGarrones();
        }

        function deleteGarron(id) {
            state.garrones = state.garrones.filter(g => g.id !== id);
            renderGarrones();
        }

        // --- Clases / Logros ---
        function renderClases() {
            const list = document.getElementById('clases-list');
            list.innerHTML = exercises.map(ex => `
                <div class="bg-white p-5 rounded-3xl border border-slate-100 shadow-sm">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center gap-3">
                            <div class="p-2 bg-slate-900 text-white rounded-2xl font-bold text-xs">${ex.class}</div>
                            <h3 class="font-bold text-slate-800 text-base">${ex.title}</h3>
                        </div>
                    </div>
                    <p class="text-xs text-slate-600 mb-2 leading-relaxed"><strong>Concepto:</strong> ${ex.concept}</p>
                    <div class="p-3 bg-slate-50 rounded-xl mb-3 border border-dashed border-slate-200">
                        <p class="text-[11px] text-slate-500 italic">"${ex.task}"</p>
                    </div>
                    <button onclick="toggleExercise(${ex.id})" class="w-full py-3 rounded-2xl text-[10px] font-black tracking-widest uppercase transition-all ${state.completed.includes(ex.id) ? 'bg-green-600 text-white' : 'bg-slate-100 text-slate-400'}">
                        ${state.completed.includes(ex.id) ? 'LOGRADO' : 'MARCAR COMO LOGRADO'}
                    </button>
                </div>
            `).join('');
            updateProgress();
        }

        function toggleExercise(id) {
            if(state.completed.includes(id)) {
                state.completed = state.completed.filter(x => x !== id);
            } else {
                state.completed.push(id);
            }
            localStorage.setItem('web_completed', JSON.stringify(state.completed));
            renderClases();
        }

        function updateProgress() {
            const percent = Math.round((state.completed.length / exercises.length) * 100);
            document.getElementById('progress-percent').innerText = `${percent}%`;
        }

        // --- Bitácora ---
        function renderReflections() {
            const list = document.getElementById('reflections-list');
            list.innerHTML = state.reflections.map(r => `
                <div class="bg-white p-5 rounded-3xl border border-slate-100 shadow-sm">
                    <span class="text-[10px] font-black text-indigo-600 uppercase tracking-widest">${r.date}</span>
                    <p class="text-sm text-slate-700 leading-relaxed font-medium mt-1">${r.text}</p>
                </div>
            `).join('');
            localStorage.setItem('web_reflections', JSON.stringify(state.reflections));
        }

        document.getElementById('save-reflection').addEventListener('click', () => {
            const input = document.getElementById('reflection-input');
            if(!input.value.trim()) return;
            state.reflections.unshift({ 
                id: Date.now(), 
                text: input.value, 
                date: new Date().toLocaleDateString() 
            });
            input.value = '';
            renderReflections();
        });

        // --- Configuración ---
        document.getElementById('reset-btn').addEventListener('click', () => {
            if(confirm("¿Seguro que querés borrar todo el progreso?")) {
                localStorage.clear();
                window.location.reload();
            }
        });

        // Init
        window.onload = () => {
            showTab('dashboard');
            renderGarrones();
            renderClases();
            renderReflections();
        };

    </script>
</body>
</html>